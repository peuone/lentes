<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√ìticas Diniz - Assistente de Lentes</title>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #c4161c;
            --secondary-color: #FFFFFF;
            --hover-color: #a01217;
            --back-color: #6C757D;
            --text-color: #333333;
            --background-color: #F4F4F4;
            --white-text: #FFFFFF;
            --premium-color: #FFD700;
            --resina-color: #4CAF50;
            --policarbonato-color: #2196F3;
            --alto-indice-color: #9C27B0;
        }

        body {
            font-family: 'Open Sans', sans-serif;
            margin: 0;
            padding: 20px;
            background-color: var(--background-color);
            color: var(--text-color);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header img {
            max-width: 200px;
            height: auto;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .option-card {
            background: var(--secondary-color);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            text-align: center;
            border-left: 5px solid var(--primary-color);
        }

        .option-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .option-card img {
            width: 100%;
            max-width: 150px;
            height: auto;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .option-card h4 {
            margin: 10px 0;
            color: var(--primary-color);
            font-size: 1.2em;
        }

        .option-card p {
            font-size: 0.9em;
            color: var(--text-color);
            line-height: 1.4;
            text-align: left;
        }

        .badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 0.8em;
            margin-right: 5px;
            font-weight: bold;
        }

        .resina-badge {
            background-color: var(--resina-color);
            color: white;
        }

        .policarbonato-badge {
            background-color: var(--policarbonato-color);
            color: white;
        }

        .alto-indice-badge {
            background-color: var(--alto-indice-color);
            color: white;
        }

        .navigation-buttons {
            text-align: center;
            margin-top: 30px;
        }

        button {
            background-color: var(--primary-color);
            color: var(--white-text);
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 0 10px;
            transition: background-color 0.3s;
            font-family: 'Open Sans', sans-serif;
            font-size: 1em;
        }

        .back-button {
            background-color: var(--back-color) !important;
        }

        button:hover {
            background-color: var(--hover-color);
        }

        .step {
            display: none;
        }

        .step.active {
            display: block;
        }

        .whatsapp-button {
            background-color: #25D366;
            color: white;
            padding: 15px 25px;
            border-radius: 5px;
            text-decoration: none;
            display: inline-block;
            margin-top: 20px;
            font-size: 1.1em;
            transition: background-color 0.3s;
        }

        .whatsapp-button:hover {
            background-color: #128C7E;
        }

        .footer {
            text-align: center;
            margin-top: 40px;
            color: var(--text-color);
            font-size: 0.9em;
        }

        .welcome-step {
            text-align: center;
        }

        .welcome-step input {
            padding: 10px;
            font-size: 1em;
            border-radius: 5px;
            border: 1px solid #ccc;
            margin-bottom: 20px;
            width: 80%;
            max-width: 300px;
        }

        .observations {
            margin-top: 20px;
        }

        .observations textarea {
            width: 100%;
            max-width: 500px;
            padding: 10px;
            font-size: 1em;
            border-radius: 5px;
            border: 1px solid #ccc;
            resize: vertical;
            min-height: 100px;
        }

        .info-icon {
            display: inline-block;
            width: 20px;
            height: 20px;
            background-color: var(--primary-color);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 20px;
            font-size: 12px;
            margin-right: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <img src="https://github.com/user-attachments/assets/e352ef86-5b03-444d-adc0-8f83017dc053" alt="Logo √ìticas Diniz">
        </div>

        <!-- P√°gina inicial -->
        <div id="welcome-step" class="step active welcome-step">
            <h3>Bem-vindo ao Assistente Diniz</h3>
            <input type="text" id="client-name" placeholder="Digite o nome do cliente">
            <div class="navigation-buttons">
                <button onclick="startAtendimento()">Iniciar Atendimento</button>
            </div>
        </div>

        <!-- Passos da navega√ß√£o -->
        <div id="step1" class="step"></div> <!-- Receita m√©dica -->
        <div id="step2" class="step"></div> <!-- Agendar consulta -->
        <div id="step3" class="step"></div> <!-- Categoria de lentes -->
        <div id="step4" class="step"></div> <!-- Tipo de lente -->
        <div id="step5" class="step"></div> <!-- √çndice de refra√ß√£o -->
        <div id="step6" class="step"></div> <!-- Fotossens√≠vel -->
        <div id="step7" class="step"></div> <!-- Antirreflexo -->
        <div id="summary" class="step summary"></div> <!-- Resumo -->
    </div>

    <div class="footer">
        <footer>
            <p>üöß Em desenvolvimento por <strong>Pedro Rodrigues</strong> ‚Äì <em>N√£o sou Dev, mas t√¥ tentando!</em> üòÖ</p>
            <p>üì© Sugest√µes? Me chama no WhatsApp: <a href="https://wa.me/5581997665895" target="_blank">+55 81 99766-5895</a></p>
        </footer>
    </div>

    <script>
        const options = {
            'visao-simples': {
                types: [
                    { name: 'Convencional', img: 'pictures/vsconvencional.png', desc: 'Lentes tradicionais com tecnologia b√°sica.' },
                    { name: 'Digital', img: 'pictures/vsdigital.png', desc: 'Lentes com design digital para maior precis√£o.' },
                    { name: 'Freeform', img: 'pictures/vsfreeform.png', desc: 'Lentes personalizadas com tecnologia avan√ßada.' }
                ],
                fotossensivel: ['Sim', 'N√£o'],
                antirreflexo: ['Sem Antirreflexo', 'Verde', 'Azul', 'Solar']
            },
            'multifocais': {
                types: [
                    { name: 'Convencional', img: 'pictures/convencional.png', desc: 'Lentes multifocais tradicionais.' },
                    { name: 'Digital', img: 'pictures/digital.png', desc: 'Multifocais com design digital.' },
                    { name: 'Freeform', img: 'pictures/freeform.png', desc: 'Multifocais personalizadas com tecnologia avan√ßada.' }
                ],
                versions: [
                    { name: 'DMAX GO', img: 'pictures/dmaxgo.png', desc: 'Conforto e Nitidez com Pre√ßo Acess√≠vel' },
                    { name: 'DMAX LIGHT', img: 'pictures/dmaxlight.png', desc: 'Versatilidade, F√°cil Adapta√ß√£o e Equil√≠brio entre os Campos' },
                    { name: 'DMAX SMART', img: 'pictures/dmaxsmart.png', desc: 'Distribui√ß√£o Balanceada, Melhor Custo-benef√≠cio' },
                    { name: 'DMAX TOP', img: 'pictures/dmaxtop.png', desc: 'Conforto Superior, Alta Tecnologia, Nitidez Excelente' },
                    { name: 'DMAX INFINITY', img: 'pictures/dmaxinfinity.png', desc: 'Tecnologia de Ponta, M√°xima Personaliza√ß√£o' }
                ],
                fotossensivel: ['Sim', 'N√£o'],
                antirreflexo: {
                    'Convencional': ['Sem Antirreflexo', 'Verde', 'Azul', 'Solar'],
                    'Digital': ['Sem Antirreflexo', 'Verde', 'Azul', 'Solar'],
                    'Freeform': ['Sem Antirreflexo', 'Verde', 'Azul', 'Verde Premium', 'Azul Premium', 'Solar']
                }
            },
            'bifocais': {
                types: [
                    { name: 'Convencional', img: 'pictures/vsconvencional.png', desc: 'Lentes bifocais tradicionais.' },
                    { name: 'Digital', img: 'pictures/vsdigital.png', desc: 'Bifocais com design digital.' },
                    { name: 'Freeform', img: 'pictures/vsfreeform.png', desc: 'Bifocais personalizadas com tecnologia avan√ßada.' }
                ],
                categories: ['Ultex', 'Panoptik', 'Kriptok', 'Executive'],
                fotossensivel: ['Sim', 'N√£o'],
                antirreflexo: ['Sem Antirreflexo', 'Verde', 'Azul', 'Solar']
            },
            'indice-refracao': [
                { 
                    name: 'Resinas Padr√£o (1.49, 1.50 e 1.56)', 
                    img: 'pictures/resina-padrao.png',
                    desc: 'Melhor custo-benef√≠cio, indicado para graus baixos (at√© ¬±3.00) e arma√ß√µes menores.<br><br>‚úÖ Boa qualidade √≥ptica<br>‚úÖ Maior espessura em compara√ß√£o com √≠ndices mais altos<br>‚úÖ Opcionais de tratamento antirreflexo e prote√ß√£o UV',
                    badgeClass: 'resina-badge'
                },
                { 
                    name: 'Policarbonato (1.59)', 
                    img: 'pictures/policarbonato.png',
                    desc: 'Ideal para crian√ßas, esportes e uso di√°rio com mais resist√™ncia.<br><br>‚úÖ Alta resist√™ncia a impactos (mais seguro)<br>‚úÖ Lente leve e confort√°vel<br>‚úÖ Prote√ß√£o UV integrada',
                    badgeClass: 'policarbonato-badge'
                },
                { 
                    name: 'Resinas de Alto √çndice (1.60, 1.61, 1.67, 1.74)', 
                    img: 'pictures/alto-indice.png',
                    desc: 'Recomendado para graus m√©dios a altos (acima de ¬±3.00), proporcionando mais est√©tica e conforto.<br><br>‚úÖ Lentes mais finas e leves<br>‚úÖ Melhor op√ß√£o para arma√ß√µes maiores<br>‚úÖ Prote√ß√£o UV integrada',
                    badgeClass: 'alto-indice-badge'
                },
                { 
                    name: 'Obter Sugest√£o da Loja', 
                    img: 'pictures/sugestao-loja.png',
                    desc: 'N√£o tem certeza sobre a melhor op√ß√£o? Nossa equipe pode recomendar a lente ideal com base no seu grau e arma√ß√£o!<br><br>‚úÖ Avalia√ß√£o personalizada<br>‚úÖ Melhor equil√≠brio entre est√©tica e custo<br>‚úÖ Escolha segura e recomendada por especialistas',
                    badgeClass: ''
                }
            ]
        };

        let currentSelection = {
            category: '',
            type: '',
            versao: '',
            indiceRefracao: '',
            fotossensivel: '',
            antirreflexo: '',
            bifocalCategory: '',
            clientName: '',
            receitaMedica: ''
        };

        let currentStepHistory = ['welcome-step'];

        function navigateTo(stepId, fromHistory = false) {
            if (!fromHistory) currentStepHistory.push(stepId);
            document.querySelectorAll('.step').forEach(step => step.classList.remove('active'));
            document.getElementById(stepId).classList.add('active');
        }

        function goBack() {
            if (currentStepHistory.length > 1) {
                currentStepHistory.pop();
                const prevStep = currentStepHistory[currentStepHistory.length - 1];
                navigateTo(prevStep, true);
            }
        }

        function startAtendimento() {
            const clientName = document.getElementById('client-name').value;
            if (!clientName) {
                alert('Por favor, insira o nome do cliente.');
                return;
            }
            currentSelection.clientName = clientName;
            showReceitaMedicaStep();
        }

        function showReceitaMedicaStep() {
            const step = document.getElementById('step1');
            step.innerHTML = `
                <h3>Voc√™ tem receita m√©dica?</h3>
                <div class="options-grid">
                    <div class="option-card" onclick="selectReceitaMedica('Sim')">
                        <h4>Sim, tenho receita.</h4>
                        <p>Quero prosseguir com o assistente de lentes.</p>
                    </div>
                    <div class="option-card" onclick="selectReceitaMedica('N√£o')">
                        <h4>N√£o tenho receita m√©dica.</h4>
                        <p>Gostaria de agendar uma consulta.</p>
                    </div>
                </div>
                <div class="navigation-buttons">
                    <button class="back-button" onclick="goBack()">Voltar</button>
                </div>
            `;
            navigateTo('step1');
        }

        function selectReceitaMedica(opt) {
            currentSelection.receitaMedica = opt;
            if (opt === 'Sim') {
                showCategorySelection();
            } else {
                showAgendarConsultaStep();
            }
        }

        function showAgendarConsultaStep() {
            const step = document.getElementById('step2');
            step.innerHTML = `
                <h3>Quer enviar para a loja sua sugest√£o de lentes?</h3>
                <div class="options-grid">
                    <div class="option-card" onclick="selectEnviarSugestao('Sim')">
                        <h4>Sim</h4>
                        <p>Quero enviar minha sugest√£o de lentes.</p>
                    </div>
                    <div class="option-card" onclick="selectEnviarSugestao('N√£o')">
                        <h4>N√£o</h4>
                        <p>Quero apenas agendar uma consulta.</p>
                    </div>
                </div>
                <div class="navigation-buttons">
                    <button class="back-button" onclick="goBack()">Voltar</button>
                </div>
            `;
            navigateTo('step2');
        }

        function selectEnviarSugestao(opt) {
            if (opt === 'Sim') {
                showCategorySelection();
            } else {
                showAgendamentoConsulta();
            }
        }

        function showAgendamentoConsulta() {
            const summary = document.getElementById('summary');
            const whatsappMessage = `Ol√°, gostaria de agendar uma consulta. Cliente: ${currentSelection.clientName}`;
            const whatsappLink = `https://wa.me/5581997665895?text=${encodeURIComponent(whatsappMessage)}`;

            summary.innerHTML = `
                <h3>Agendamento de Consulta:</h3>
                <p><strong>Cliente:</strong> ${currentSelection.clientName}</p>
                <a href="${whatsappLink}" class="whatsapp-button" target="_blank">Clique aqui para agendar a consulta</a>
                <div class="navigation-buttons">
                    <button onclick="init()">Reiniciar</button>
                </div>
            `;
            navigateTo('summary');
        }

        function showCategorySelection() {
            const step3 = document.getElementById('step3');
            step3.innerHTML = `
                <h3>Selecione o Tipo de Lente:</h3>
                <div class="options-grid">
                    <div class="option-card" onclick="selectCategory('visao-simples')">
                        <img src="pictures/visao-simples.png" alt="Vis√£o Simples">
                        <h4>Vis√£o Simples</h4>
                        <p>Lentes para corre√ß√£o de problemas de vis√£o de perto ou longe.</p>
                    </div>
                    <div class="option-card" onclick="selectCategory('multifocais')">
                        <img src="pictures/multifocal.png" alt="Multifocais">
                        <h4>Multifocais</h4>
                        <p>Lentes que corrigem vis√£o de perto, intermedi√°ria e longe.</p>
                    </div>
                    <div class="option-card" onclick="selectCategory('bifocais')">
                        <img src="pictures/bifocal.png" alt="Bifocais">
                        <h4>Bifocais</h4>
                        <p>Lentes com duas √°reas de vis√£o: perto e longe.</p>
                    </div>
                </div>
                <div class="navigation-buttons">
                    <button class="back-button" onclick="goBack()">Voltar</button>
                </div>
            `;
            navigateTo('step3');
        }

        function selectCategory(category) {
            currentSelection.category = category;
            showTypeSelection();
        }

        function showTypeSelection() {
            const step4 = document.getElementById('step4');
            const categoryData = options[currentSelection.category];
            step4.innerHTML = `
                <h3>Selecione o Tipo de ${currentSelection.category.replace('-', ' ').toUpperCase()}:</h3>
                <div class="options-grid">
                    ${categoryData.types.map(type => `
                        <div class="option-card" onclick="selectType('${type.name}')">
                            <img src="${type.img}" alt="${type.name}">
                            <h4>${type.name}</h4>
                            <p>${type.desc}</p>
                        </div>
                    `).join('')}
                </div>
                <div class="navigation-buttons">
                    <button class="back-button" onclick="goBack()">Voltar</button>
                </div>
            `;
            navigateTo('step4');
        }

        function selectType(type) {
            currentSelection.type = type;
            if (currentSelection.category === 'multifocais' && type === 'Freeform') {
                showVersionSelection();
            } else if (currentSelection.category === 'bifocais') {
                showBifocalCategorySelection();
            } else {
                showIndiceRefracaoSelection();
            }
        }

        function showVersionSelection() {
            const step5 = document.getElementById('step5');
            step5.innerHTML = `
                <h3>Selecione a Vers√£o Freeform:</h3>
                <div class="options-grid">
                    ${options.multifocais.versions.map(version => `
                        <div class="option-card" onclick="selectVersion('${version.name}')">
                            <img src="${version.img}" alt="${version.name}">
                            <h4>${version.name}</h4>
                            <p>${version.desc}</p>
                        </div>
                    `).join('')}
                </div>
                <div class="navigation-buttons">
                    <button class="back-button" onclick="goBack()">Voltar</button>
                </div>
            `;
            navigateTo('step5');
        }

        function selectVersion(version) {
            currentSelection.versao = version;
            showIndiceRefracaoSelection();
        }

        function showBifocalCategorySelection() {
            const step5 = document.getElementById('step5');
            step5.innerHTML = `
                <h3>Selecione a Categoria de Bifocais:</h3>
                <div class="options-grid">
                    ${options.bifocais.categories.map(category => `
                        <div class="option-card" onclick="selectBifocalCategory('${category}')">
                            <img src="pictures/${category.toLowerCase()}.png" alt="${category}">
                            <h4>${category}</h4>
                        </div>
                    `).join('')}
                </div>
                <div class="navigation-buttons">
                    <button class="back-button" onclick="goBack()">Voltar</button>
                </div>
            `;
            navigateTo('step5');
        }

        function selectBifocalCategory(category) {
            currentSelection.bifocalCategory = category;
            showIndiceRefracaoSelection();
        }

        function showIndiceRefracaoSelection() {
            const stepId = currentSelection.versao ? 'step6' : 'step5';
            const step = document.getElementById(stepId);
            step.innerHTML = `
                <h3>Escolha o √çndice de Refra√ß√£o:</h3>
                <div class="options-grid">
                    ${options['indice-refracao'].map(item => `
                        <div class="option-card" onclick="selectIndiceRefracao('${item.name}')">
                            ${item.badgeClass ? `<span class="badge ${item.badgeClass}">${item.name.split(' ')[0]}</span>` : ''}
                            <img src="${item.img}" alt="${item.name}">
                            <h4>${item.name}</h4>
                            <p>${item.desc}</p>
                        </div>
                    `).join('')}
                </div>
                <div class="navigation-buttons">
                    <button class="back-button" onclick="goBack()">Voltar</button>
                </div>
            `;
            navigateTo(stepId);
        }

        function selectIndiceRefracao(indice) {
            currentSelection.indiceRefracao = indice;
            showFotossensivelSelection();
        }

        function showFotossensivelSelection() {
            const stepId = currentSelection.versao ? 'step7' : 'step6';
            const step = document.getElementById(stepId);
            step.innerHTML = `
                <h3>Tratamento Fotossens√≠vel:</h3>
                <div class="options-grid">
                    ${options[currentSelection.category].fotossensivel.map(opt => `
                        <div class="option-card" onclick="selectFotossensivel('${opt}')">
                            <img src="${opt === 'Sim' ? 'pictures/fotossensivel-sim.png' : 'pictures/fotossensivel-nao.png'}" alt="${opt}">
                            <h4>${opt}</h4>
                            <p>${opt === 'Sim' ? 'Lentes que escurecem automaticamente ao sol, proporcionando conforto visual em ambientes externos e internos.' : 'Lentes sem altera√ß√£o ao sol, mantendo a transpar√™ncia em qualquer ambiente.'}</p>
                        </div>
                    `).join('')}
                </div>
                <div class="navigation-buttons">
                    <button class="back-button" onclick="goBack()">Voltar</button>
                </div>
            `;
            navigateTo(stepId);
        }

        function selectFotossensivel(opt) {
            currentSelection.fotossensivel = opt;
            showAntirreflexoSelection();
        }

        function showAntirreflexoSelection() {
            const stepId = currentSelection.versao ? 'step8' : 'step7';
            const step = document.getElementById(stepId);
            const antirreflexoOptions = currentSelection.category === 'multifocais' ?
                options.multifocais.antirreflexo[currentSelection.type] : options[currentSelection.category].antirreflexo;

            step.innerHTML = `
                <h3>Tratamento Antirreflexo:</h3>
                <div class="options-grid">
                    ${antirreflexoOptions.map(opt => `
                        <div class="option-card" onclick="selectAntirreflexo('${opt}')">
                            <img src="${getAntirreflexoImage(opt)}" alt="${opt}">
                            <h4>${opt} ${opt.includes('Premium') ? '<span class="badge" style="background: var(--premium-color)">2 anos de garantia</span>' : ''}</h4>
                            <p>${getAntirreflexoDescription(opt)}</p>
                        </div>
                    `).join('')}
                </div>
                <div class="navigation-buttons">
                    <button class="back-button" onclick="goBack()">Voltar</button>
                </div>
            `;
            navigateTo(stepId);
        }

        function getAntirreflexoImage(opt) {
            switch (opt) {
                case 'Verde': return 'pictures/arverde.png';
                case 'Azul': return 'pictures/arazul.png';
                case 'Solar': return 'pictures/antirreflexo-solar.png';
                case 'Verde Premium': return 'pictures/arverde.png';
                case 'Azul Premium': return 'pictures/arazul.png';
                case 'Sem Antirreflexo': return 'pictures/sem-antirreflexo.png';
                default: return 'pictures/default.png';
            }
        }

        function getAntirreflexoDescription(opt) {
            switch (opt) {
                case 'Sem Antirreflexo': return 'Sem tratamento adicional.';
                case 'Verde': return 'Prote√ß√£o contra reflexos e luz intensa, ideal para ambientes externos.';
                case 'Azul': return 'Prote√ß√£o contra a luz azul nociva de dispositivos digitais.';
                case 'Solar': return 'Lentes solares para prote√ß√£o contra raios UV.';
                case 'Verde Premium': return 'Prote√ß√£o premium contra reflexos com durabilidade de 2 anos.';
                case 'Azul Premium': return 'Prote√ß√£o premium contra luz azul com durabilidade de 2 anos.';
                default: return 'Descri√ß√£o n√£o dispon√≠vel.';
            }
        }

        function selectAntirreflexo(opt) {
            currentSelection.antirreflexo = opt;
            showSummary();
        }

        function showSummary() {
            const summary = document.getElementById('summary');
            let whatsappMessage = `*Pedido de Lentes - √ìticas Diniz*\n\n`;
            whatsappMessage += `*Cliente:* ${currentSelection.clientName}\n`;
            whatsappMessage += `*Categoria:* ${currentSelection.category.replace('-', ' ').toUpperCase()}\n`;
            whatsappMessage += `*Tipo:* ${currentSelection.type}\n`;
            if (currentSelection.versao) whatsappMessage += `*Vers√£o:* ${currentSelection.versao}\n`;
            if (currentSelection.bifocalCategory) whatsappMessage += `*Categoria Bifocal:* ${currentSelection.bifocalCategory}\n`;
            whatsappMessage += `*√çndice de Refra√ß√£o:* ${currentSelection.indiceRefracao}\n`;
            whatsappMessage += `*Fotossens√≠vel:* ${currentSelection.fotossensivel}\n`;
            whatsappMessage += `*Antirreflexo:* ${currentSelection.antirreflexo}\n`;
            
            if (currentSelection.receitaMedica === 'N√£o') {
                whatsappMessage += `\n*Observa√ß√£o:* O cliente n√£o possui receita m√©dica e deseja agendar uma consulta.\n`;
            }

            const observations = document.getElementById('observations')?.value || '';
            if (observations) {
                whatsappMessage += `\n*Observa√ß√µes Adicionais:*\n${observations}\n`;
            }

            const whatsappLink = `https://wa.me/5581997665895?text=${encodeURIComponent(whatsappMessage)}`;

            summary.innerHTML = `
                <h3>Resumo da Sua Escolha:</h3>
                <p><strong>Cliente:</strong> ${currentSelection.clientName}</p>
                <p><strong>Categoria:</strong> ${currentSelection.category.replace('-', ' ').toUpperCase()}</p>
                <p><strong>Tipo:</strong> ${currentSelection.type}</p>
                ${currentSelection.versao ? `<p><strong>Vers√£o:</strong> ${currentSelection.versao}</p>` : ''}
                ${currentSelection.bifocalCategory ? `<p><strong>Categoria Bifocal:</strong> ${currentSelection.bifocalCategory}</p>` : ''}
                <p><strong>√çndice de Refra√ß√£o:</strong> ${currentSelection.indiceRefracao}</p>
                <p><strong>Fotossens√≠vel:</strong> ${currentSelection.fotossensivel}</p>
                <p><strong>Antirreflexo:</strong> ${currentSelection.antirreflexo}</p>
                
                <div class="observations">
                    <label for="observations">Observa√ß√µes (opcional):</label>
                    <textarea id="observations" placeholder="Adicione observa√ß√µes, se necess√°rio"></textarea>
                </div>

                <div class="navigation-buttons">
                    <button class="back-button" onclick="goBack()">Voltar</button>
                    <button onclick="init()">Reiniciar</button>
                </div>
                <a href="${whatsappLink}" class="whatsapp-button" target="_blank" id="whatsapp-link">Enviar Pedido para a Loja</a>
            `;

            document.getElementById('observations').addEventListener('input', function() {
                const updatedMessage = whatsappMessage + (this.value ? `\n\n*Observa√ß√µes Adicionais:*\n${this.value}` : '');
                document.getElementById('whatsapp-link').href = `https://wa.me/5581997665895?text=${encodeURIComponent(updatedMessage)}`;
            });

            navigateTo('summary');
        }

        function init() {
            currentSelection = {
                category: '',
                type: '',
                versao: '',
                indiceRefracao: '',
                fotossensivel: '',
                antirreflexo: '',
                bifocalCategory: '',
                clientName: '',
                receitaMedica: ''
            };
            currentStepHistory = ['welcome-step'];
            navigateTo('welcome-step');
        }

        init();
    </script>
</body>
</html>
